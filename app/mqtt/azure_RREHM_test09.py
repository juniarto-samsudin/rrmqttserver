# This is test code for Azure webservice application
# Developed by : Farzam Farbiz
# Date: 02/11/2021
# Input: 250 features (S1F1, ... , S5F50)
# Models: S1ML1 ,S1ML2 ,S1ML3 , S12345ML1, S12345ML2, S12345ML3
#Outputs:

"""
{
  "Results": {
    "S2ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.9999887608064494,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 0.000014633963827903907,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.999992318373924
      }
    ],
    "S3ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.999994570994735,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 0.000004668415301487929,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.9999925211056632
      }
    ],
    "S1ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.9999829150382469,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 0.000003853193387506169,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.999975201795195
      }
    ],
    "S12345ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.9999816412253246,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 0.000002435848493998989,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.9999980470834224
      }
    ],
    "S4ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.9999596886130608,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 6.378572207251631e-7,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.9999885672471501
      }
    ],
    "S5ModelsOutput": [
      {
        "ML1 Anomaly Scored Labels": 1,
        "ML1 Anomaly Scored Probabilities": 0.999999549877879,
        "ML2 Bearing Fault Scored Labels": 0,
        "ML2 Bearing Fault Scored Probabilities": 0.000011587969101706328,
        "ML3 Gearbox Fault Scored Labels": 1,
        "ML3 Gearbox Fault Scored Probabilities": 0.9999975720311738
      }
    ]
  }
}
"""

import urllib.request
import json
import os
import ssl

def allowSelfSignedHttps(allowed):
    # bypass the server certificate verification on client side
    if allowed and not os.environ.get('PYTHONHTTPSVERIFY', '') and getattr(ssl, '_create_unverified_context', None):
        ssl._create_default_https_context = ssl._create_unverified_context

allowSelfSignedHttps(True) # this line is needed if you use self-signed certificate in your scoring service.

# Request data goes here
"""
### This is sample data from the training csv file:
data = {
    "Inputs": {
        "WebServiceInput0":
        [
            {
                'S1F1': "5.11e-9",
                'S1F2': "512489",
                'S1F3': "4.87e-9",
                'S1F4': "0.013428637",
                'S1F5': "2.71e-8",
                'S1F6': "9.99e-10",
                'S1F7': "2.45e-8",
                'S1F8': "3.79e-7",
                'S1F9': "8.36e-10",
                'S1F10': "1.22e-9",
                'S1F11': "1.47e-9",
                'S1F12': "3.47e-8",
                'S1F13': "2.57e-7",
                'S1F14': "1.47e-8",
                'S1F15': "4.21e-8",
                'S1F16': "0.0000708",
                'S1F17': "1.58e-7",
                'S1F18': "9.25e-8",
                'S1F19': "1.43e-7",
                'S1F20': "1.79e-8",
                'S1F21': "3.44e-7",
                'S1F22': "2.09e-9",
                'S1F23': "2.92e-7",
                'S1F24': "1.45e-9",
                'S1F25': "0.000171074",
                'S1F26': "1.37e-8",
                'S1F27': "1.23e-9",
                'S1F28': "3.24e-8",
                'S1F29': "1.73e-9",
                'S1F30': "0.0000135",
                'S1F31': "0.000176341",
                'S1F32': "5.3e-9",
                'S1F33': "1.77e-9",
                'S1F34': "0.00000861",
                'S1F35': "8.79e-9",
                'S1F36': "2.17e-9",
                'S1F37': "4.41e-9",
                'S1F38': "1.48e-9",
                'S1F39': "1.22e-9",
                'S1F40': "3.97e-8",
                'S1F41': "1.38e-9",
                'S1F42': "1.91e-8",
                'S1F43': "7.56e-10",
                'S1F44': "1.27e-9",
                'S1F45': "6.05e-8",
                'S1F46': "1.5e-9",
                'S1F47': "3.67e-9",
                'S1F48': "1.03e-8",
                'S1F49': "-0.005456204",
                'S1F50': "5.26e-9",
                'S2F1': "1.43e-8",
                'S2F2': "1.89e-10",
                'S2F3': "1.5e-9",
                'S2F4': "3.69e-10",
                'S2F5': "6.64e-8",
                'S2F6': "8.45e-10",
                'S2F7': "1.43e-9",
                'S2F8': "5.55e-8",
                'S2F9': "6.52e-9",
                'S2F10': "6e-10",
                'S2F11': "9.68e-10",
                'S2F12': "2.98e-10",
                'S2F13': "9.31e-10",
                'S2F14': "4.25e-10",
                'S2F15': "2.93e-10",
                'S2F16': "2.63e-10",
                'S2F17': "8.41e-10",
                'S2F18': "9.82e-11",
                'S2F19': "1.94e-10",
                'S2F20': "7.73e-9",
                'S2F21': "2.15e-8",
                'S2F22': "2.7e-9",
                'S2F23': "0.003656145",
                'S2F24': "4.93e-10",
                'S2F25': "2.04e-10",
                'S2F26': "1.38e-9",
                'S2F27': "3.08e-10",
                'S2F28': "5.02e-9",
                'S2F29': "1.27e-8",
                'S2F30': "4.31e-10",
                'S2F31': "5.49e-10",
                'S2F32': "6.27e-11",
                'S2F33': "9.64e-8",
                'S2F34': "1.36e-9",
                'S2F35': "2.46e-10",
                'S2F36': "1.12e-9",
                'S2F37': "3.71e-10",
                'S2F38': "3.69e-8",
                'S2F39': "2.42e-10",
                'S2F40': "1.52e-10",
                'S2F41': "1.25e-9",
                'S2F42': "1.45e-10",
                'S2F43': "5.36e-10",
                'S2F44': "1.07e-8",
                'S2F45': "4.82e-9",
                'S2F46': "1.69e-9",
                'S2F47': "2.19e-9",
                'S2F48': "1.51e-7",
                'S2F49': "6.68e-10",
                'S2F50': "1.5e-10",
                'S3F1': "5.34e-7",
                'S3F2': "1.74e-10",
                'S3F3': "2.49e-9",
                'S3F4': "2.01e-10",
                'S3F5': "2.6e-9",
                'S3F6': "1.23e-9",
                'S3F7': "3.73e-9",
                'S3F8': "4.03e-10",
                'S3F9': "2.46e-9",
                'S3F10': "5.13e-9",
                'S3F11': "1.8e-9",
                'S3F12': "4.72e-10",
                'S3F13': "1.49e-10",
                'S3F14': "1.64e-9",
                'S3F15': "9.3e-10",
                'S3F16': "1.65e-10",
                'S3F17': "3.24e-10",
                'S3F18': "1.5e-10",
                'S3F19': "4.21e-9",
                'S3F20': "-0.187624376",
                'S3F21': "1.52e-9",
                'S3F22': "3.3e-10",
                'S3F23': "1.71e-10",
                'S3F24': "2.12e-10",
                'S3F25': "0.004849378",
                'S3F26': "6.53e-9",
                'S3F27': "1.31e-10",
                'S3F28': "5.84e-10",
                'S3F29': "1.87e-10",
                'S3F30': "7.36e-9",
                'S3F31': "4.53e-8",
                'S3F32': "3.21e-10",
                'S3F33': "6.89e-10",
                'S3F34': "1.55e-10",
                'S3F35': "1.89e-10",
                'S3F36': "1.37e-7",
                'S3F37': "3.95e-10",
                'S3F38': "5.37e-10",
                'S3F39': "2.44e-10",
                'S3F40': "4.09e-10",
                'S3F41': "2.31e-9",
                'S3F42': "6.07e-10",
                'S3F43': "2.95e-10",
                'S3F44': "1.16e-9",
                'S3F45': "1.15e-8",
                'S3F46': "2.39e-10",
                'S3F47': "4.2e-10",
                'S3F48': "1.27e-9",
                'S3F49': "3.56e-9",
                'S3F50': "3.48e-9",
                'S4F1': "7.37e-7",
                'S4F2': "2.24e-8",
                'S4F3': "2.45e-8",
                'S4F4': "3.83e-11",
                'S4F5': "0.00000342",
                'S4F6': "9.11e-7",
                'S4F7': "0.009739937",
                'S4F8': "1.44e-8",
                'S4F9': "7.91e-7",
                'S4F10': "0.00000147",
                'S4F11': "1.47e-8",
                'S4F12': "0.00000282",
                'S4F13': "1.01e-11",
                'S4F14': "6.11e-14",
                'S4F15': "0.00000387",
                'S4F16': "0.00000139",
                'S4F17': "2.39e-7",
                'S4F18': "6.81e-8",
                'S4F19': "0.0000429",
                'S4F20': "1.04e-7",
                'S4F21': "1.09e-9",
                'S4F22': "-0.017628108",
                'S4F23': "7.78e-7",
                'S4F24': "1.25e-7",
                'S4F25': "1.53e-13",
                'S4F26': "0.00000237",
                'S4F27': "0.00000211",
                'S4F28': "3.62e-9",
                'S4F29': "7.71e-10",
                'S4F30': "8.66e-11",
                'S4F31': "0.00000233",
                'S4F32': "1.75e-7",
                'S4F33': "3.73e-7",
                'S4F34': "4.33e-10",
                'S4F35': "3.54e-8",
                'S4F36': "0.006656953",
                'S4F37': "7.25e-7",
                'S4F38': "1.16e-11",
                'S4F39': "1.07e-9",
                'S4F40': "0.00000143",
                'S4F41': "9.48e-8",
                'S4F42': "2.67e-7",
                'S4F43': "0.00000118",
                'S4F44': "0.0000082",
                'S4F45': "151963",
                'S4F46': "0.00000683",
                'S4F47': "0.00000232",
                'S4F48': "4.45e-14",
                'S4F49': "0.00000332",
                'S4F50': "0.00000999",
                'S5F1': "1.16e-9",
                'S5F2': "7.24e-9",
                'S5F3': "3.57e-10",
                'S5F4': "1.19e-9",
                'S5F5': "1.44e-9",
                'S5F6': "9.8e-9",
                'S5F7': "2.76e-8",
                'S5F8': "3.73e-9",
                'S5F9': "0.00000108",
                'S5F10': "1.45e-10",
                'S5F11': "5.13e-10",
                'S5F12': "6.86e-7",
                'S5F13': "75148",
                'S5F14': "1e-7",
                'S5F15': "1.66e-9",
                'S5F16': "1.77e-9",
                'S5F17': "1.55e-9",
                'S5F18': "74234",
                'S5F19': "2.31e-10",
                'S5F20': "1.43e-8",
                'S5F21': "1.68e-10",
                'S5F22': "9.26e-10",
                'S5F23': "6.41e-9",
                'S5F24': "1.48e-9",
                'S5F25': "3.26e-9",
                'S5F26': "2.05e-9",
                'S5F27': "5.96e-8",
                'S5F28': "4.33e-9",
                'S5F29': "4.34e-8",
                'S5F30': "2.28e-9",
                'S5F31': "2.76e-8",
                'S5F32': "9.9e-8",
                'S5F33': "2.84e-9",
                'S5F34': "7.05e-10",
                'S5F35': "5.28e-8",
                'S5F36': "1.33e-9",
                'S5F37': "1.56e-8",
                'S5F38': "1.07e-9",
                'S5F39': "5.61e-10",
                'S5F40': "1.2e-8",
                'S5F41': "6.08e-10",
                'S5F42': "0.00000123",
                'S5F43': "2.22e-9",
                'S5F44': "4.73e-7",
                'S5F45': "3.84e-9",
                'S5F46': "7.54e-7",
                'S5F47': "1.24e-9",
                'S5F48': "9.36e-11",
                'S5F49': "2.37e-9",
                'S5F50': "1.21e-8",
            },
        ],
    },
    "GlobalParameters": {
    }
}
"""

"""
### This is the 1st data set from the log file:
data = {'Inputs': {'WebServiceInput0': [{'S1F1': 4.899513982176232e-08, 'S1F2': 500705.0, 'S1F3': 4.284875984961044e-09, 'S1F4': 0.0625012298347617, 'S1F5': 6.751858033916099e-09, 'S1F6': 3.15142409922977e-09, 'S1F7': 1.6197363697810586e-08, 'S1F8': 7.128482326883202e-08, 'S1F9': 3.4600198396935233e-09, 'S1F10': 2.8670068435450587e-09, 'S1F11': 3.4013763807224324e-09, 'S1F12': 8.748470767960009e-08, 'S1F13': 1.560008882392459e-08, 'S1F14': 5.185718679150755e-08, 'S1F15': 5.2253071681639545e-08, 'S1F16': 1.3509385431676482e-08, 'S1F17': 1.3779849234077293e-08, 'S1F18': 1.4115905106127011e-08, 'S1F19': 1.4416495759378418e-08, 'S1F20': 4.8092534174090585e-08, 'S1F21': 2.4919022139515366e-08, 'S1F22': 2.594744364007074e-09, 'S1F23': 3.7059861109329574e-08, 'S1F24': 2.8373090550925404e-09, 'S1F25': 1.787894395736725e-08, 'S1F26': 7.287511133663277e-09, 'S1F27': 4.287464238891672e-09, 'S1F28': 7.979865006068012e-07, 'S1F29': 6.487521514532989e-09, 'S1F30': 1.958637943826328e-05, 'S1F31': 1.5380396782475262e-08, 'S1F32': 3.144358529239435e-08, 'S1F33': 1.2722042288352007e-08, 'S1F34': 2.534823076307924e-08, 'S1F35': 3.869749064617027e-09, 'S1F36': 3.325145822805629e-09, 'S1F37': 3.1528270882878524e-08, 'S1F38': 2.9974312530315504e-09, 'S1F39': 4.04912815060941e-09, 'S1F40': 8.734825609561858e-08, 'S1F41': 3.209124953718133e-09, 'S1F42': 4.155311612758064e-08, 'S1F43': 3.1590583674632273e-09, 'S1F44': 6.4388033263150885e-09, 'S1F45': 1.3604124446252352e-08, 'S1F46': 2.945306062894884e-09, 'S1F47': 2.521030738505691e-09, 'S1F48': 3.243708196032636e-08, 'S1F49': -0.056705219396549204, 'S1F50': 4.605758039909259e-08, 'S2F1': 1.3120616356294953e-09, 'S2F2': 1.3699203917649336e-09, 'S2F3': 8.765531109837383e-09, 'S2F4': 1.132131797990625e-09, 'S2F5': 7.504628812393153e-09, 'S2F6': 1.390657984058394e-09, 'S2F7': 1.9724865830224802e-08, 'S2F8': 8.713389803192001e-09, 'S2F9': 2.617108192579055e-09, 'S2F10': 2.6566975665132892e-09, 'S2F11': 2.0137995816249788e-08, 'S2F12': 1.886966822644512e-09, 'S2F13': 3.061275440855644e-08, 'S2F14': 1.393507903841127e-09, 'S2F15': 2.5755475326951524e-09, 'S2F16': 1.3918673866941415e-09, 'S2F17': 1.0663613407050968e-09, 'S2F18': 1.2532378137940375e-09, 'S2F19': 1.2351784604789467e-09, 'S2F20': 2.014921880478828e-08, 'S2F21': 4.1849892717648315e-07, 'S2F22': 2.5318001908772768e-08, 'S2F23': 0.004492528152784341, 'S2F24': 1.7217778381657937e-09, 'S2F25': 8.379937119072134e-09, 'S2F26': 1.4743382498965958e-09, 'S2F27': 3.107955623585986e-09, 'S2F28': 1.1083786677841004e-08, 'S2F29': 9.889931289905869e-08, 'S2F30': 1.7404535036808414e-09, 'S2F31': 1.1234195256023751e-09, 'S2F32': 1.1855265487863743e-09, 'S2F33': 3.9732908299084e-08, 'S2F34': 7.186995857164961e-09, 'S2F35': 1.0325166696563843e-09, 'S2F36': 1.004679762053516e-09, 'S2F37': 2.0891464169391064e-09, 'S2F38': 1.9211716941571932e-09, 'S2F39': 1.1296307040394306e-09, 'S2F40': 1.3661613027056232e-09, 'S2F41': 1.1239998982256186e-09, 'S2F42': 8.901754645727803e-10, 'S2F43': 1.2636092667416843e-09, 'S2F44': 3.329796420520233e-07, 'S2F45': 1.425900980928312e-08, 'S2F46': 1.046294241842564e-09, 'S2F47': 1.17331293409998e-08, 'S2F48': 5.996425125629917e-07, 'S2F49': 2.9060250035371837e-09, 'S2F50': 9.61934023197114e-10, 'S3F1': 8.032105213287187e-08, 'S3F2': 4.136299876154276e-09, 'S3F3': 3.2209357702673706e-09, 'S3F4': 1.1795289548467097e-09, 'S3F5': 2.0532823622731427e-09, 'S3F6': 7.1086417226110804e-06, 'S3F7': 9.069326338444139e-09, 'S3F8': 3.824696674772422e-09, 'S3F9': 1.040939908409701e-08, 'S3F10': 3.8257734138619535e-08, 'S3F11': 6.106607635511328e-08, 'S3F12': 1.4875072585440608e-09, 'S3F13': 1.1118142640179178e-09, 'S3F14': 3.1798431194643856e-08, 'S3F15': 1.6430617485540712e-09, 'S3F16': 1.1517300526059077e-09, 'S3F17': 2.0011030185536688e-09, 'S3F18': 1.4199863698463987e-09, 'S3F19': 9.097266552109217e-08, 'S3F20': 0.010730626900513943, 'S3F21': 1.2824921287595736e-08, 'S3F22': 1.7056731610552506e-09, 'S3F23': 1.2421239263621697e-09, 'S3F24': 1.5797832878690867e-09, 'S3F25': 0.016457208117695965, 'S3F26': 4.660117958758225e-08, 'S3F27': 1.286396504321174e-09, 'S3F28': 6.934898494638872e-09, 'S3F29': 1.1877330656951778e-09, 'S3F30': 1.656630097841441e-08, 'S3F31': 1.3395186720120391e-08, 'S3F32': 1.3681252733877924e-09, 'S3F33': 9.885144348223426e-10, 'S3F34': 1.3339538696193174e-09, 'S3F35': 1.2110955079962298e-09, 'S3F36': 9.704289402665057e-08, 'S3F37': 8.583998518259761e-10, 'S3F38': 3.850619509925491e-09, 'S3F39': 2.939393314815221e-09, 'S3F40': 3.3328729045292043e-09, 'S3F41': 1.7165846455699944e-08, 'S3F42': 1.6702622359539437e-09, 'S3F43': 1.2972900040519754e-09, 'S3F44': 4.186044443637787e-09, 'S3F45': 1.056084859146361e-08, 'S3F46': 1.2992994653706121e-09, 'S3F47': 4.459215472822316e-09, 'S3F48': 1.1486047512351201e-08, 'S3F49': 9.373365027246397e-09, 'S3F50': 9.497322807292483e-08, 'S4F1': 4.088498226644021e-06, 'S4F2': 3.3956201871717815e-09, 'S4F3': 3.4314585811233898e-09, 'S4F4': 4.273267365299323e-12, 'S4F5': 1.3124489087209187e-09, 'S4F6': 3.951896947833838e-06, 'S4F7': 0.018869306856256807, 'S4F8': 1.1025355606080335e-08, 'S4F9': 5.688762362954366e-06, 'S4F10': 8.722225375566939e-06, 'S4F11': 9.925231944763503e-09, 'S4F12': 4.087875247193426e-06, 'S4F13': 3.0751376425116213e-13, 'S4F14': 3.1626655525094965e-14, 'S4F15': 1.0093881440126671e-05, 'S4F16': 5.397326896086941e-05, 'S4F17': 2.099509662772699e-07, 'S4F18': 2.5720633880831194e-06, 'S4F19': 0.0006914320634660352, 'S4F20': 8.142760917748902e-10, 'S4F21': 2.2432972765555616e-12, 'S4F22': -0.007327493652906461, 'S4F23': 1.9847000404883365e-06, 'S4F24': 1.0387228147560588e-08, 'S4F25': 3.367479011261175e-14, 'S4F26': 2.905764331040384e-05, 'S4F27': 4.3473343511596455e-05, 'S4F28': 1.5632552939120497e-12, 'S4F29': 3.141369275459836e-11, 'S4F30': 2.0982686482019394e-13, 'S4F31': 3.624610558839637e-05, 'S4F32': 3.836673732082022e-06, 'S4F33': 4.128674896221185e-09, 'S4F34': 4.584321042689029e-13, 'S4F35': 6.532274628043271e-10, 'S4F36': 0.016570356366334613, 'S4F37': 2.5870142455270394e-06, 'S4F38': 6.405896672355528e-13, 'S4F39': 8.882957694769007e-10, 'S4F40': 1.1504209038601717e-07, 'S4F41': 3.653330857520226e-08, 'S4F42': 1.195945929867528e-09, 'S4F43': 3.959539860219767e-06, 'S4F44': 2.7616464525099915e-09, 'S4F45': 221287.0, 'S4F46': 8.360513623159439e-10, 'S4F47': 1.8315375433546593e-05, 'S4F48': 3.1622272409931295e-14, 'S4F49': 3.20303083481712e-07, 'S4F50': 2.3966078828522737e-05, 'S5F1': 2.6199653711618147e-09, 'S5F2': 6.630542381271345e-09, 'S5F3': 1.5451651349037376e-10, 'S5F4': 2.9738578693537624e-09, 'S5F5': 3.4003206160571017e-09, 'S5F6': 3.273489472745169e-08, 'S5F7': 1.4813156418069304e-08, 'S5F8': 8.985933862124665e-11, 'S5F9': 4.90967849594449e-10, 'S5F10': 6.752552796844497e-11, 'S5F11': 5.835639404416049e-09, 'S5F12': 5.641082132672761e-09, 'S5F13': 110893.0, 'S5F14': 1.020027096917543e-10, 'S5F15': 5.558960885023805e-09, 'S5F16': 1.442350177216211e-08, 'S5F17': 4.912237375532899e-09, 'S5F18': 52803.0, 'S5F19': 1.0880321592730453e-09, 'S5F20': 3.2024057560185765e-10, 'S5F21': 9.302942971813078e-11, 'S5F22': 1.1021221742573331e-10, 'S5F23': 3.651067203803978e-09, 'S5F24': 1.5899779324675295e-08, 'S5F25': 3.096771357806933e-09, 'S5F26': 1.9043000172860956e-10, 'S5F27': 1.0824735369401968e-08, 'S5F28': 5.532058576411141e-09, 'S5F29': 2.3138019162167862e-10, 'S5F30': 3.4217101649097074e-09, 'S5F31': 7.630907799168844e-07, 'S5F32': 9.982275543567703e-11, 'S5F33': 1.7059982037892457e-10, 'S5F34': 9.276633386751187e-11, 'S5F35': 7.098911170511866e-10, 'S5F36': 1.4725087878702933e-09, 'S5F37': 2.1415478815387214e-08, 'S5F38': 7.170857505422014e-08, 'S5F39': 5.531880632460591e-09, 'S5F40': 6.031529393916489e-09, 'S5F41': 6.340508842323346e-10, 'S5F42': 1.4877374475279577e-07, 'S5F43': 1.2992707018970055e-10, 'S5F44': 1.1465212691405232e-08, 'S5F45': 6.895736760865086e-08, 'S5F46': 9.025684327110041e-08, 'S5F47': 4.547185655104757e-09, 'S5F48': 1.0432846026952964e-10, 'S5F49': 9.439530317625742e-11, 'S5F50': 7.235706998631551e-09},],},     "GlobalParameters": {
    }}
    
"""
### This is the 2nd data set from the log file. For this one, I did not add "GlobalParameters": {} , but still works fine
data = {'Inputs': {'WebServiceInput0': [{'S1F1': 4.94038615932563e-08, 'S1F2': 478519.0, 'S1F3': 5.176465208092003e-09, 'S1F4': 0.06086282038423226, 'S1F5': 6.912907743398723e-09, 'S1F6': 3.3181100115659555e-09, 'S1F7': 2.526992921461562e-08, 'S1F8': 8.877998727289052e-08, 'S1F9': 3.950495741288917e-09, 'S1F10': 3.184418292252125e-09, 'S1F11': 4.1181084982879875e-09, 'S1F12': 1.404550792924313e-07, 'S1F13': 2.0405677516844778e-08, 'S1F14': 4.5279178336295124e-08, 'S1F15': 5.204593632534637e-08, 'S1F16': 1.9458452967181216e-08, 'S1F17': 1.3456484420635467e-08, 'S1F18': 1.606994744489572e-08, 'S1F19': 1.647044107088033e-08, 'S1F20': 5.193572597128829e-08, 'S1F21': 2.1157411957593512e-08, 'S1F22': 2.840072228812447e-09, 'S1F23': 4.183282466701533e-08, 'S1F24': 3.103983417420192e-09, 'S1F25': 1.8168657981984902e-08, 'S1F26': 7.502326123461947e-09, 'S1F27': 3.3567845416591126e-09, 'S1F28': 8.128876582406439e-07, 'S1F29': 7.1443946576359294e-09, 'S1F30': 2.611594077428109e-05, 'S1F31': 1.577334229072407e-08, 'S1F32': 5.0575283897774174e-08, 'S1F33': 1.0436355605800861e-08, 'S1F34': 3.435826644301417e-08, 'S1F35': 3.3680522808406727e-09, 'S1F36': 2.716761121700677e-09, 'S1F37': 2.8367855577045698e-08, 'S1F38': 3.3742034932496103e-09, 'S1F39': 3.5806112976316186e-09, 'S1F40': 8.570279480033403e-08, 'S1F41': 3.5616456155746205e-09, 'S1F42': 4.4682568618599165e-08, 'S1F43': 2.5517465193170663e-09, 'S1F44': 6.261881151673705e-09, 'S1F45': 1.3519092487335279e-08, 'S1F46': 2.829624563355238e-09, 'S1F47': 2.2785927283071464e-09, 'S1F48': 3.654449456220229e-08, 'S1F49': -0.057206869310595536, 'S1F50': 6.407639965385251e-08, 'S2F1': 8.280293703798488e-10, 'S2F2': 9.272902231471007e-10, 'S2F3': 1.0073042669865468e-08, 'S2F4': 1.015516642018808e-09, 'S2F5': 9.201009757392278e-09, 'S2F6': 1.4685801985997918e-09, 'S2F7': 1.5787384971343202e-08, 'S2F8': 8.417570842593633e-09, 'S2F9': 2.3795995670606425e-09, 'S2F10': 2.100665391790074e-09, 'S2F11': 1.949212249425107e-08, 'S2F12': 1.1281587891530075e-09, 'S2F13': 3.445999850913902e-08, 'S2F14': 1.2124102531199967e-09, 'S2F15': 2.482234712538615e-09, 'S2F16': 1.2262678584677812e-09, 'S2F17': 8.03790087286734e-10, 'S2F18': 1.1779260070328608e-09, 'S2F19': 1.2933306116319181e-09, 'S2F20': 1.7064800305464486e-08, 'S2F21': 4.230238582588461e-07, 'S2F22': 2.1366300181777503e-08, 'S2F23': 0.004386504564265825, 'S2F24': 2.2876146461689543e-09, 'S2F25': 1.0025240493989437e-08, 'S2F26': 1.3217479492461172e-09, 'S2F27': 2.458803383349829e-09, 'S2F28': 1.2688680093976281e-08, 'S2F29': 1.0030006978271696e-07, 'S2F30': 1.2918253532268606e-09, 'S2F31': 8.092514235311235e-10, 'S2F32': 1.020445375008145e-09, 'S2F33': 3.6627115770411764e-08, 'S2F34': 8.176824055596681e-09, 'S2F35': 5.99946102211391e-10, 'S2F36': 8.740665381849152e-10, 'S2F37': 2.5696886186286616e-09, 'S2F38': 1.3482038710629368e-09, 'S2F39': 8.852751715109882e-10, 'S2F40': 9.11346927436645e-10, 'S2F41': 5.879003865960267e-10, 'S2F42': 8.38160257379781e-10, 'S2F43': 9.043537142003075e-10, 'S2F44': 3.2560708132401225e-07, 'S2F45': 1.18948319510358e-08, 'S2F46': 6.490986878665963e-10, 'S2F47': 1.313962899940945e-08, 'S2F48': 5.684363348195081e-07, 'S2F49': 2.042044478251515e-09, 'S2F50': 1.0864065281823662e-09, 'S3F1': 8.039802124607632e-08, 'S3F2': 5.255507673614163e-09, 'S3F3': 4.760815419367331e-09, 'S3F4': 1.2413115978410013e-09, 'S3F5': 1.819212109320733e-09, 'S3F6': 7.027548222130161e-06, 'S3F7': 8.249874203026421e-09, 'S3F8': 4.040367131398623e-09, 'S3F9': 9.964046769985633e-09, 'S3F10': 3.3312107161559264e-08, 'S3F11': 4.0714671558262225e-08, 'S3F12': 1.2359886255304184e-09, 'S3F13': 1.2679736700497507e-09, 'S3F14': 2.1312960733786552e-08, 'S3F15': 2.0251445300188953e-09, 'S3F16': 1.6431599388122843e-09, 'S3F17': 1.68504154968828e-09, 'S3F18': 1.6560987635202073e-09, 'S3F19': 8.220051354606929e-08, 'S3F20': 0.011270877205550384, 'S3F21': 1.2029303297809706e-08, 'S3F22': 1.7407901467728117e-09, 'S3F23': 7.937129546686594e-10, 'S3F24': 1.156018809921943e-09, 'S3F25': 0.0105243023896376, 'S3F26': 7.084629415512726e-08, 'S3F27': 1.041207043562866e-09, 'S3F28': 6.192343170908906e-09, 'S3F29': 1.4276233012596936e-09, 'S3F30': 1.4064271623626798e-08, 'S3F31': 1.4474126983665149e-08, 'S3F32': 1.164259868702807e-09, 'S3F33': 1.1432808946920133e-09, 'S3F34': 1.2423700803121696e-09, 'S3F35': 1.0420571232084043e-09, 'S3F36': 9.450324898711724e-08, 'S3F37': 8.550350306542059e-10, 'S3F38': 4.090015686837249e-09, 'S3F39': 2.7781959177296963e-09, 'S3F40': 2.5417453913839747e-09, 'S3F41': 1.4866718309249489e-08, 'S3F42': 1.467628582027243e-09, 'S3F43': 1.2576768010477853e-09, 'S3F44': 4.142797837241591e-09, 'S3F45': 1.0566979147104195e-08, 'S3F46': 1.8435271722136383e-09, 'S3F47': 3.180963684548505e-09, 'S3F48': 1.038172503424924e-08, 'S3F49': 7.814156890221263e-09, 'S3F50': 1.0968281386829792e-07, 'S4F1': 3.837721454294795e-06, 'S4F2': 3.4852025952047814e-09, 'S4F3': 6.3639470391973285e-09, 'S4F4': 3.5761583182424803e-12, 'S4F5': 8.361770273095863e-10, 'S4F6': 4.545022436336526e-06, 'S4F7': 0.018803387935547002, 'S4F8': 1.0946814361737642e-08, 'S4F9': 5.355387266292241e-06, 'S4F10': 8.591930495011164e-06, 'S4F11': 8.453001736838115e-09, 'S4F12': 4.485788183758119e-06, 'S4F13': 2.400642959279022e-13, 'S4F14': 3.759472696812626e-14, 'S4F15': 8.656502006852298e-06, 'S4F16': 5.125056436395524e-05, 'S4F17': 1.950345361282232e-07, 'S4F18': 2.503431031945746e-06, 'S4F19': 0.0006296746559005732, 'S4F20': 1.1216359114047661e-09, 'S4F21': 1.7772940743646727e-12, 'S4F22': -0.007353252011082912, 'S4F23': 2.150744858118345e-06, 'S4F24': 9.496418942778061e-09, 'S4F25': 3.353806952650827e-14, 'S4F26': 2.9130843716617822e-05, 'S4F27': 4.543081359015032e-05, 'S4F28': 1.3396626316806387e-12, 'S4F29': 2.952514784911554e-11, 'S4F30': 2.770096044807446e-13, 'S4F31': 4.058099837923773e-05, 'S4F32': 3.163825712662706e-06, 'S4F33': 3.865613178627545e-09, 'S4F34': 5.19177105062862e-13, 'S4F35': 1.020929561531892e-09, 'S4F36': 0.016665504099752523, 'S4F37': 2.13139889372403e-06, 'S4F38': 4.427856070424612e-13, 'S4F39': 9.633086521785847e-10, 'S4F40': 1.0692786792436344e-07, 'S4F41': 4.921381124338838e-08, 'S4F42': 1.0394565000346094e-09, 'S4F43': 4.649848818799131e-06, 'S4F44': 2.0414700451112985e-09, 'S4F45': 222712.0, 'S4F46': 8.992388015951377e-10, 'S4F47': 1.5221615025807699e-05, 'S4F48': 3.029955323423478e-14, 'S4F49': 3.5672168340536074e-07, 'S4F50': 2.0038614981379647e-05, 'S5F1': 1.9911034256423448e-09, 'S5F2': 4.8959912558404065e-09, 'S5F3': 1.4330578119642586e-10, 'S5F4': 3.2897305393220737e-09, 'S5F5': 3.1355720329850073e-09, 'S5F6': 4.2917701211138766e-08, 'S5F7': 1.5590444781816984e-08, 'S5F8': 1.0142018747096192e-10, 'S5F9': 3.5620398135342327e-10, 'S5F10': 8.671315930319628e-11, 'S5F11': 5.256042980099125e-09, 'S5F12': 4.517308147734892e-09, 'S5F13': 110694.0, 'S5F14': 9.910442695171623e-11, 'S5F15': 5.637473371537765e-09, 'S5F16': 1.67642237191222e-08, 'S5F17': 4.9954565674654175e-09, 'S5F18': 55605.0, 'S5F19': 1.4832069584050409e-09, 'S5F20': 3.005514072380296e-10, 'S5F21': 8.969043020089719e-11, 'S5F22': 8.177809063473986e-11, 'S5F23': 3.445379484129205e-09, 'S5F24': 1.9548470700852645e-08, 'S5F25': 3.584285251116697e-09, 'S5F26': 1.497711264748541e-10, 'S5F27': 8.777123086897956e-09, 'S5F28': 4.972408239426484e-09, 'S5F29': 2.855928223989886e-10, 'S5F30': 3.121833618340961e-09, 'S5F31': 9.00521155497575e-07, 'S5F32': 1.2002901077832948e-10, 'S5F33': 1.1164601892163461e-10, 'S5F34': 1.2034431377824954e-10, 'S5F35': 8.578505666693428e-10, 'S5F36': 1.4514380382927272e-09, 'S5F37': 2.1347507250316194e-08, 'S5F38': 7.28578672788071e-08, 'S5F39': 6.546253562828032e-09, 'S5F40': 6.499919983751089e-09, 'S5F41': 4.759391314703544e-10, 'S5F42': 1.2702898776409826e-07, 'S5F43': 1.0400467940027481e-10, 'S5F44': 8.343051530427446e-09, 'S5F45': 6.4088258669278e-08, 'S5F46': 6.079881835495762e-08, 'S5F47': 4.309020147351524e-09, 'S5F48': 1.272717897264994e-10, 'S5F49': 1.0799490923406517e-10, 'S5F50': 6.716527869408888e-09}]}}

body = str.encode(json.dumps(data))

url = 'http://20.43.146.68:80/api/v1/service/s4ml1deployment/score'
api_key = 'uKAoWY9fpa8aVjgIYPIFMHAUj5XVGWeu' # Replace this with the API key for the web service
headers = {'Content-Type':'application/json', 'Authorization':('Bearer '+ api_key)}

req = urllib.request.Request(url, body, headers)

try:
    response = urllib.request.urlopen(req)

    result = response.read()
    print(result)
except urllib.error.HTTPError as error:
    print("The request failed with status code: " + str(error.code))

    # Print the headers - they include the requert ID and the timestamp, which are useful for debugging the failure
    print(error.info())
    print(json.loads(error.read().decode("utf8", 'ignore')))
